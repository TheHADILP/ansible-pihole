---
services:

  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    restart: unless-stopped
    environment:
{% for var, value in pihole_environment_variables.items() %}
      - {{ var }}={{ value }}
{% endfor %}
    volumes:
      - /etc/pihole:/etc/pihole
      - /etc/dnsmasq.d:/etc/dnsmasq.d
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "80:80/tcp"
      - "443:443/tcp"{% if pihole_environment_variables.DHCP_ACTIVE | lower == 'true' %}
      - "67:67/udp"  # DHCP port
      {% endif %}